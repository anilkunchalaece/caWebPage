<!DOCTYPE html>
<html>

<head>
    <title>Testing Page </title>
    <script src="sources/script/jquery.min.js"></script>
</head>

<body>
    <button id="tagSelect">Select Subject </button>


    <div id="tagSelectDiv">
        <select id="selectForTag" >  </select>
    </div>


    <div id="subTagSelectDiv">
        <select id="selectForSubTag" multiple> </select>
    </div>


    <script>
        $(document).ready(function() {
                    $("#tagSelectDiv").hide();
                    $("#subTagSelectDiv").hide();

                    $("#tagSelect").click(function() {
                        console.log("buttonClicked");
                        $.ajax({
                            type: "POST",
                            url: "ca/getTags.php",
                            data: {
                                key: "tag"
                            },
                            success: function(data) {
                                console.log("Tags :: " + data);
                                data = JSON.parse(data);
                                $("#selectForTag").append('<option value="0" selected="selected"> Branch </option>')

                                for (var key in data) {
                                    $("#selectForTag").append('<option value="' + key + '">' + data[key] + "</option>");
                                }

                                $("#tagSelectDiv").show();

                            },
                        });
                      })


                        $('#selectForTag').on('change', function() {
                            console.log("Tag option Changed");

                            $("#selectForSubTag option").each(function() {
                                $(this).remove();
                            });

                            $.ajax({
                                type: "POST",
                                url: "ca/getTags.php",
                                data: {
                                    key: "subTag", val : $('#selectForTag').val()
                                },
                                success: function(data) {

                                    console.log("Sub Tags ::" + data);
                                    data = JSON.parse(data);

                                    for (var key in data) {
                                        $("#selectForSubTag").append('<option value="' + key + '">' + data[key] + "</option>");
                                    }
                                    $("#subTagSelectDiv").show();


                                },

                            });
                          });


                            $(document).ajaxError(function() {
                                alert("there is a Error in Ajax Call");
                            });
                        });
    </script>

</body>

</html>
