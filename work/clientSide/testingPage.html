<!DOCTYPE html>
<html>

<head>
    <title>Testing Page </title>
     <meta charset="UTF-8">
    <script src="sources/script/jquery.min.js"></script>
</head>

<body>

    <select id="noOfQuestions">
      <option value="0" selected>No Of Question</option>
      <option value="10"> 10 </option>
      <option value="20"> 20 </option>
      <option value="30"> 30 </option>
    </select>


    <div id="tagSelectDiv">
        <select id="selectForTag" >  </select>
    </div>


    <div id="subTagSelectDiv">
        <select id="selectForSubTag" multiple> </select>
    </div>

    <button id="takeTest">Take Test</button>



    <script>
        $(document).ready(function() {
                    $("#tagSelectDiv").hide();
                    $("#subTagSelectDiv").hide();
                    $("#takeTest").hide();

                    $("#noOfQuestions").on('change', function(){
                      var noOfQuestions = $("noOfQuestions").val();
                        console.log("No Of Questions Selected is"+noOfQuestions);
                        $.ajax({
                            type: "POST",
                            url: "ca/getTags.php",
                            data: {
                                key: "tag"
                            },
                            success: function(data) {
                                console.log("Tags :: " + data);
                                data = JSON.parse(data);
                                $("#selectForTag").append('<option value="0" selected="selected"> Branch </option>')

                                for (var key in data) {
                                    $("#selectForTag").append('<option value="' + key + '">' + data[key] + "</option>");
                                }

                                $("#tagSelectDiv").show();

                            },
                        });
                      })


                        $('#selectForTag').on('change', function() {
                            console.log("Tag option Changed");

                            $("#selectForSubTag option").each(function() {
                                $(this).remove();
                            });

                            $.ajax({
                                type: "POST",
                                url: "ca/getTags.php",
                                data: {
                                    key: "subTag", val : $('#selectForTag').val()
                                },
                                success: function(data) {

                                    console.log("Sub Tags ::" + data);
                                    data = JSON.parse(data);

                                    for (var key in data) {
                                        $("#selectForSubTag").append('<option value="' + key + '">' + data[key] + "</option>");
                                    }
                                    $("#subTagSelectDiv").show();
                                    $("#takeTest").show();

                                },

                            });
                          });


                          $("#takeTest").click(function(){
                            var subTagsArray = $("#selectForSubTag").val();
                            var noOfSubTags = subTags.length;
                            var questionForSubTag = noOfQuestions/noOfSubTags;
                            

                          })


                            $(document).ajaxError(function() {
                                alert("there is a Error in Ajax Call");
                            });
                        });
    </script>

</body>

</html>
